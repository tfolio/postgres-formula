postgres:
  minor_version: 9.3
  config_dir: /var/lib/postgres/data # default: distro-specific
  ssl:
    disabled: false
    ciphers: 'DEFAULT:!LOW:!EXP:!MD5:@STRENGTH'
    cert: '/etc/ssl/certs/ssl-cert-snakeoil.pem'
    key: '/etc/ssl/private/ssl-cert-snakeoil.key'
    work_mem: '100MB' # default: depends on total system RAM
    maintenance_work_mem: 100 # in MB; default: depends on total system RAM
    checkpoint_segments: 32
    checkpoint_timeout: 10 # in minutes
    effective_cache_size: 200 # in MB; default: depends on total system RAM
  pg_hba.conf: salt://postgres/pg_hba.conf

  lookup:
    pkg: 'postgresql-9.3'
    pg_hba: '/etc/postgresql/9.3/main/pg_hba.conf'

  users:
    localUser:
      password: '98ruj923h4rf'
      createdb: False

    remoteUser:
      password: '98ruj923h4rf'
      createdb: False

  # This section cover this ACL management of the pg_hba.conf file.
  # <type>, <database>, <user>, [host], <method>
  acls:
    - ['local', 'db1', 'localUser']
    - ['host', 'db2', '123.123.0.0/24', 'remoteUser']

  databases:
    db1:
      owner: 'localUser'
      user: 'localUser'
      template: 'template0'
      lc_ctype: 'C.UTF-8'
      lc_collate: 'C.UTF-8'

    db2:
      owner: 'localUser'
      user: 'remoteUser'
      template: 'template0'
      lc_ctype: 'C.UTF-8'
      lc_collate: 'C.UTF-8'
